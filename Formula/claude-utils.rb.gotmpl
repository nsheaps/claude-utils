# typed: false
# frozen_string_literal: true

class ClaudeUtils < Formula
  desc 'CLI utilities for Claude Code workflow management'
  homepage 'https://github.com/nsheaps/claude-utils'
  url 'https://github.com/nsheaps/claude-utils/archive/refs/tags/{{ .Env.Tag }}.tar.gz'
  sha256 '{{ .Env.SHA256 }}'
  license 'MIT'

  head do
    url 'https://github.com/nsheaps/claude-utils.git', branch: 'main'
  end

  depends_on 'nsheaps/devsetup/claude-team'
  depends_on 'fzf'
  depends_on 'gum'

  def install
    # Install all bin scripts except claude-team and ct (now in claude-team formula)
    Dir['bin/*'].each do |f|
      next if %w[claude-team ct].include?(File.basename(f))
      bin.install f
    end
  end

  test do
    assert_match 'ccresume', shell_output("#{bin}/ccresume --help 2>&1", 1)
  end
end
