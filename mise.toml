[tools]
node = "lts"
yarn = "4"

[tasks.test]
description = "Run CLI tests"
run = "bash test/cli-test.sh"

[tasks.lint]
description = "Check bash syntax for all scripts"
run = """
find bin -type f -name '*.sh' -o -type f ! -name '*.*' | while read -r script; do
  if head -1 "$script" | grep -q 'bash'; then
    echo "Checking $script..."
    bash -n "$script"
  fi
done
echo "All scripts passed syntax check."
"""

[tasks.lint-formula]
description = "Lint Homebrew formula with rubocop"
run = "rubocop Formula/*.rb --config .rubocop.yml"

[tasks.check]
description = "Run all checks (lint + test)"
depends = ["lint", "test"]
run = "echo 'All checks passed'"
